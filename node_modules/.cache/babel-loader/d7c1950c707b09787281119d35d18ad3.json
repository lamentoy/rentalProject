{"ast":null,"code":"import _slicedToArray from \"/Users/lamentoyy/Desktop/rental_project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, computed, defineComponent } from \"vue\";\nimport { clamp, isDef, numericProp, preventDefault, callInterceptor, createNamespace, makeNumericProp } from \"../utils\";\nimport { useRect, useClickAway } from \"@vant/use\";\nimport { useTouch } from \"../composables/use-touch\";\nimport { useExpose } from \"../composables/use-expose\";\n\nvar _createNamespace = createNamespace(\"swipe-cell\"),\n    _createNamespace2 = _slicedToArray(_createNamespace, 2),\n    name = _createNamespace2[0],\n    bem = _createNamespace2[1];\n\nvar swipeCellProps = {\n  name: makeNumericProp(\"\"),\n  disabled: Boolean,\n  leftWidth: numericProp,\n  rightWidth: numericProp,\n  beforeClose: Function,\n  stopPropagation: Boolean\n};\nvar stdin_default = defineComponent({\n  name: name,\n  props: swipeCellProps,\n  emits: [\"open\", \"close\", \"click\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots;\n    var opened;\n    var lockClick;\n    var startOffset;\n    var root = ref();\n    var leftRef = ref();\n    var rightRef = ref();\n    var state = reactive({\n      offset: 0,\n      dragging: false\n    });\n    var touch = useTouch();\n\n    var getWidthByRef = function getWidthByRef(ref2) {\n      return ref2.value ? useRect(ref2).width : 0;\n    };\n\n    var leftWidth = computed(function () {\n      return isDef(props.leftWidth) ? +props.leftWidth : getWidthByRef(leftRef);\n    });\n    var rightWidth = computed(function () {\n      return isDef(props.rightWidth) ? +props.rightWidth : getWidthByRef(rightRef);\n    });\n\n    var open = function open(side) {\n      state.offset = side === \"left\" ? leftWidth.value : -rightWidth.value;\n\n      if (!opened) {\n        opened = true;\n        emit(\"open\", {\n          name: props.name,\n          position: side\n        });\n      }\n    };\n\n    var close = function close(position) {\n      state.offset = 0;\n\n      if (opened) {\n        opened = false;\n        emit(\"close\", {\n          name: props.name,\n          position: position\n        });\n      }\n    };\n\n    var toggle = function toggle(side) {\n      var offset = Math.abs(state.offset);\n      var THRESHOLD = 0.15;\n      var threshold = opened ? 1 - THRESHOLD : THRESHOLD;\n      var width = side === \"left\" ? leftWidth.value : rightWidth.value;\n\n      if (width && offset > width * threshold) {\n        open(side);\n      } else {\n        close(side);\n      }\n    };\n\n    var onTouchStart = function onTouchStart(event) {\n      if (!props.disabled) {\n        startOffset = state.offset;\n        touch.start(event);\n      }\n    };\n\n    var onTouchMove = function onTouchMove(event) {\n      if (props.disabled) {\n        return;\n      }\n\n      var deltaX = touch.deltaX;\n      touch.move(event);\n\n      if (touch.isHorizontal()) {\n        lockClick = true;\n        state.dragging = true;\n        var isEdge = !opened || deltaX.value * startOffset < 0;\n\n        if (isEdge) {\n          preventDefault(event, props.stopPropagation);\n        }\n\n        state.offset = clamp(deltaX.value + startOffset, -rightWidth.value, leftWidth.value);\n      }\n    };\n\n    var onTouchEnd = function onTouchEnd() {\n      if (state.dragging) {\n        state.dragging = false;\n        toggle(state.offset > 0 ? \"left\" : \"right\");\n        setTimeout(function () {\n          lockClick = false;\n        }, 0);\n      }\n    };\n\n    var onClick = function onClick() {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"outside\";\n      emit(\"click\", position);\n\n      if (opened && !lockClick) {\n        callInterceptor(props.beforeClose, {\n          args: [{\n            name: props.name,\n            position: position\n          }],\n          done: function done() {\n            return close(position);\n          }\n        });\n      }\n    };\n\n    var getClickHandler = function getClickHandler(position, stop) {\n      return function (event) {\n        if (stop) {\n          event.stopPropagation();\n        }\n\n        onClick(position);\n      };\n    };\n\n    var renderSideContent = function renderSideContent(side, ref2) {\n      var contentSlot = slots[side];\n\n      if (contentSlot) {\n        return _createVNode(\"div\", {\n          \"ref\": ref2,\n          \"class\": bem(side),\n          \"onClick\": getClickHandler(side, true)\n        }, [contentSlot()]);\n      }\n    };\n\n    useExpose({\n      open: open,\n      close: close\n    });\n    useClickAway(root, function () {\n      return onClick(\"outside\");\n    }, {\n      eventName: \"touchstart\"\n    });\n    return function () {\n      var _a;\n\n      var wrapperStyle = {\n        transform: \"translate3d(\".concat(state.offset, \"px, 0, 0)\"),\n        transitionDuration: state.dragging ? \"0s\" : \".6s\"\n      };\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": bem(),\n        \"onClick\": getClickHandler(\"cell\", lockClick),\n        \"onTouchstart\": onTouchStart,\n        \"onTouchmove\": onTouchMove,\n        \"onTouchend\": onTouchEnd,\n        \"onTouchcancel\": onTouchEnd\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"wrapper\"),\n        \"style\": wrapperStyle\n      }, [renderSideContent(\"left\", leftRef), (_a = slots.default) == null ? void 0 : _a.call(slots), renderSideContent(\"right\", rightRef)])]);\n    };\n  }\n});\nexport { stdin_default as default };","map":{"version":3,"names":["createVNode","_createVNode","ref","reactive","computed","defineComponent","clamp","isDef","numericProp","preventDefault","callInterceptor","createNamespace","makeNumericProp","useRect","useClickAway","useTouch","useExpose","name","bem","swipeCellProps","disabled","Boolean","leftWidth","rightWidth","beforeClose","Function","stopPropagation","stdin_default","props","emits","setup","emit","slots","opened","lockClick","startOffset","root","leftRef","rightRef","state","offset","dragging","touch","getWidthByRef","ref2","value","width","open","side","position","close","toggle","Math","abs","THRESHOLD","threshold","onTouchStart","event","start","onTouchMove","deltaX","move","isHorizontal","isEdge","onTouchEnd","setTimeout","onClick","args","done","getClickHandler","stop","renderSideContent","contentSlot","eventName","_a","wrapperStyle","transform","transitionDuration","default","call"],"sources":["/Users/lamentoyy/Desktop/rental_project/node_modules/vant/es/swipe-cell/SwipeCell.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, computed, defineComponent } from \"vue\";\nimport { clamp, isDef, numericProp, preventDefault, callInterceptor, createNamespace, makeNumericProp } from \"../utils\";\nimport { useRect, useClickAway } from \"@vant/use\";\nimport { useTouch } from \"../composables/use-touch\";\nimport { useExpose } from \"../composables/use-expose\";\nconst [name, bem] = createNamespace(\"swipe-cell\");\nconst swipeCellProps = {\n  name: makeNumericProp(\"\"),\n  disabled: Boolean,\n  leftWidth: numericProp,\n  rightWidth: numericProp,\n  beforeClose: Function,\n  stopPropagation: Boolean\n};\nvar stdin_default = defineComponent({\n  name,\n  props: swipeCellProps,\n  emits: [\"open\", \"close\", \"click\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let opened;\n    let lockClick;\n    let startOffset;\n    const root = ref();\n    const leftRef = ref();\n    const rightRef = ref();\n    const state = reactive({\n      offset: 0,\n      dragging: false\n    });\n    const touch = useTouch();\n    const getWidthByRef = (ref2) => ref2.value ? useRect(ref2).width : 0;\n    const leftWidth = computed(() => isDef(props.leftWidth) ? +props.leftWidth : getWidthByRef(leftRef));\n    const rightWidth = computed(() => isDef(props.rightWidth) ? +props.rightWidth : getWidthByRef(rightRef));\n    const open = (side) => {\n      state.offset = side === \"left\" ? leftWidth.value : -rightWidth.value;\n      if (!opened) {\n        opened = true;\n        emit(\"open\", {\n          name: props.name,\n          position: side\n        });\n      }\n    };\n    const close = (position) => {\n      state.offset = 0;\n      if (opened) {\n        opened = false;\n        emit(\"close\", {\n          name: props.name,\n          position\n        });\n      }\n    };\n    const toggle = (side) => {\n      const offset = Math.abs(state.offset);\n      const THRESHOLD = 0.15;\n      const threshold = opened ? 1 - THRESHOLD : THRESHOLD;\n      const width = side === \"left\" ? leftWidth.value : rightWidth.value;\n      if (width && offset > width * threshold) {\n        open(side);\n      } else {\n        close(side);\n      }\n    };\n    const onTouchStart = (event) => {\n      if (!props.disabled) {\n        startOffset = state.offset;\n        touch.start(event);\n      }\n    };\n    const onTouchMove = (event) => {\n      if (props.disabled) {\n        return;\n      }\n      const {\n        deltaX\n      } = touch;\n      touch.move(event);\n      if (touch.isHorizontal()) {\n        lockClick = true;\n        state.dragging = true;\n        const isEdge = !opened || deltaX.value * startOffset < 0;\n        if (isEdge) {\n          preventDefault(event, props.stopPropagation);\n        }\n        state.offset = clamp(deltaX.value + startOffset, -rightWidth.value, leftWidth.value);\n      }\n    };\n    const onTouchEnd = () => {\n      if (state.dragging) {\n        state.dragging = false;\n        toggle(state.offset > 0 ? \"left\" : \"right\");\n        setTimeout(() => {\n          lockClick = false;\n        }, 0);\n      }\n    };\n    const onClick = (position = \"outside\") => {\n      emit(\"click\", position);\n      if (opened && !lockClick) {\n        callInterceptor(props.beforeClose, {\n          args: [{\n            name: props.name,\n            position\n          }],\n          done: () => close(position)\n        });\n      }\n    };\n    const getClickHandler = (position, stop) => (event) => {\n      if (stop) {\n        event.stopPropagation();\n      }\n      onClick(position);\n    };\n    const renderSideContent = (side, ref2) => {\n      const contentSlot = slots[side];\n      if (contentSlot) {\n        return _createVNode(\"div\", {\n          \"ref\": ref2,\n          \"class\": bem(side),\n          \"onClick\": getClickHandler(side, true)\n        }, [contentSlot()]);\n      }\n    };\n    useExpose({\n      open,\n      close\n    });\n    useClickAway(root, () => onClick(\"outside\"), {\n      eventName: \"touchstart\"\n    });\n    return () => {\n      var _a;\n      const wrapperStyle = {\n        transform: `translate3d(${state.offset}px, 0, 0)`,\n        transitionDuration: state.dragging ? \"0s\" : \".6s\"\n      };\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": bem(),\n        \"onClick\": getClickHandler(\"cell\", lockClick),\n        \"onTouchstart\": onTouchStart,\n        \"onTouchmove\": onTouchMove,\n        \"onTouchend\": onTouchEnd,\n        \"onTouchcancel\": onTouchEnd\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"wrapper\"),\n        \"style\": wrapperStyle\n      }, [renderSideContent(\"left\", leftRef), (_a = slots.default) == null ? void 0 : _a.call(slots), renderSideContent(\"right\", rightRef)])]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}