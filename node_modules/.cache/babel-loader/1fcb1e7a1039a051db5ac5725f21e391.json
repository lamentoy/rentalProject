{"ast":null,"code":"import _asyncToGenerator from \"/Users/lamentoyy/Desktop/rental_project/rental_Project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"resultPage\",\n  props: [\"searchLocations\", \"searchLocations2\", \"LocationTypes\"],\n  mounted: function mounted() {\n    //         console.log(this.$route.params.searchLocations)\n    // console.log(this.$route.params.searchLocations2)\n    // console.log(this.$route.params.LocationTypes)\n    // this.searchLocations=this.$route.params.searchLocations\n    // this.searchLocations2=this.$route.params.searchLocations2\n    // this.LocationTypes=this.$route.params.LocationTypes\n    this.favList = this.$store.state.favList; // // this.initMap()\n    // if(this.searchLocations){\n    // this.searchNearbyLocations()\n    // sessionStorage.setItem('params', JSON.stringify(this.$route.params));\n    // let data = sessionStorage.getItem('params');\n    //     console.log('adddd',data)\n    // }else{\n    //     let data = JSON.parse(sessionStorage.getItem('params'));\n    //     console.log(data)\n    //     console.log(data.searchLocations)\n    //     this.searchLocations=data.searchLocations\n    //     this.searchLocations2=data.searchLocations2\n    //     this.LocationTypes=data.LocationTypes\n    //     console.log(data.searchLocations2)\n    //     console.log(data.LocationTypes)\n    //     this.searchNearbyLocations()\n    // }\n\n    this.searchNearbyLocations();\n  },\n  data: function data() {\n    return {\n      types: [\"hospital\", \"restaurant\", \"supermarket\", \"pharmacy\"],\n      results: [],\n      favList: [],\n      fav: [],\n      mapShown: false,\n      mapTitle: \"\",\n      mapType: \"\"\n    };\n  },\n  methods: {\n    searchNearbyLocations: function searchNearbyLocations() {\n      var _this = this;\n\n      var _loop = function _loop(i) {\n        if (_this.searchLocations[i].viewport.Ta) {\n          lat = _this.searchLocations[i].viewport.yb.h;\n          lng = _this.searchLocations[i].viewport.Ta.h;\n        } else if (_this.searchLocations[i].viewport.Ab) {\n          lat = _this.searchLocations[i].viewport.Ab.h;\n          lng = _this.searchLocations[i].viewport.Ua.h;\n        } else {\n          lat = _this.searchLocations[i].viewport.south;\n          lng = _this.searchLocations[i].viewport.west;\n        }\n\n        var added = _this.checkIfAdded(_this.searchLocations[i].shortName);\n\n        _this.fav.push(added);\n\n        _this.results.push([_this.searchLocations[i].shortName, [], added, [], [], 0, lat, lng]);\n\n        _this.distanceMatrix(_this.searchLocations[i].id, i);\n\n        var _loop2 = function _loop2(j) {\n          var URL = \"api/maps/api/place/nearbysearch/json?location=\".concat(lat, \",\").concat(lng, \"&type=\").concat(_this.types[j], \"&radius=250&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\");\n          axios.get(URL).then( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(response) {\n              var result;\n              return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _context3.next = 2;\n                      return response.data.results;\n\n                    case 2:\n                      result = _context3.sent;\n\n                      _this.results[i][1].push([_this.types[j], result]);\n\n                      _this.rateThePlace();\n\n                    case 5:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, _callee3);\n            }));\n\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }()).catch(function (error) {\n            console.log(error.message);\n          });\n        };\n\n        for (var j = 0; j < _this.types.length; j++) {\n          _loop2(j);\n        }\n\n        var URL1 = \"api/maps/api/place/nearbysearch/json?location=\".concat(lat, \",\").concat(lng, \"&keyword=tram_stop&radius=250&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\");\n        axios.get(URL1).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(response) {\n            var result;\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return response.data.results;\n\n                  case 2:\n                    result = _context.sent;\n\n                    _this.results[i][1].push([\"tram stop\", result]);\n\n                    _this.rateThePlace();\n\n                  case 5:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()).catch(function (error) {\n          console.log(error.message);\n        });\n\n        if (_this.LocationTypes.length > 0) {\n          var _loop3 = function _loop3(k) {\n            var URL2 = \"api/maps/api/place/nearbysearch/json?location=\".concat(lat, \",\").concat(lng, \"&keyword=\").concat(_this.LocationTypes[k], \"&radius=250&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\");\n            axios.get(URL2).then( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(response) {\n                var result;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return response.data.results;\n\n                      case 2:\n                        result = _context2.sent;\n\n                        _this.results[i][4].push([_this.LocationTypes[k], result]);\n\n                        _this.rateThePlace();\n\n                      case 5:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()).catch(function (error) {\n              console.log(error.message);\n            });\n          };\n\n          for (var k = 0; k < _this.LocationTypes.length; k++) {\n            _loop3(k);\n          }\n        }\n      };\n\n      for (var i = 0; i < this.searchLocations.length; i++) {\n        var lat;\n        var lng;\n\n        _loop(i);\n      }\n    },\n    addtoFavorite: function addtoFavorite(element, index) {\n      if (this.favList && this.favList.length > 0) {\n        this.favList.push(element);\n      } else {\n        this.favList = [];\n        this.favList.push(element);\n      }\n\n      this.$store.commit(\"updatefavList\", this.favList);\n      this.fav.splice(index, 1, true);\n      this.$message.success('You save the result!');\n    },\n    distanceMatrix: function distanceMatrix(id, index) {\n      var _this2 = this;\n\n      var _loop4 = function _loop4(i) {\n        // const lat1 = this.searchLocations2[i].viewport.Ab.h\n        // const lng1= this.searchLocations2[i].viewport.Va.h\n        var id2 = _this2.searchLocations2[i].id;\n        axios = require('axios');\n        config = {\n          method: 'get',\n          url: \"api/maps/api/distancematrix/json?origins=place_id:\".concat(id, \"&destinations=place_id:\").concat(id2, \"&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\"),\n          headers: {}\n        };\n        axios(config).then(function (response) {\n          var k = response.data.rows[0].elements[0];\n          var distance = k.distance.text;\n          var duration = k.duration.text;\n\n          _this2.results[index][3].push([_this2.searchLocations2[i].shortName, distance, duration]);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n\n      for (var i = 0; i < this.searchLocations2.length; i++) {\n        var axios;\n        var config;\n\n        _loop4(i);\n      }\n    },\n    removeFromFavorite: function removeFromFavorite(element, index) {\n      for (var i = 0; i < this.favList.length; i++) {\n        if (this.favList[i][0] == element[0]) {\n          this.favList.splice(i, 1);\n        }\n      }\n\n      this.$store.commit(\"updatefavList\", this.favList);\n      this.fav.splice(index, 1, false);\n      this.$message.error('You remove the result!');\n    },\n    jumpToReview: function jumpToReview(item) {\n      this.$router.push({\n        name: 'mreview',\n        params: {\n          \"src\": item.urls,\n          \"title\": item.title,\n          \"pre\": 1,\n          \"searchLocations\": this.searchLocations,\n          \"searchLocations2\": this.searchLocations2,\n          \"LocationTypes\": this.LocationTypes\n        }\n      });\n    },\n    checkIfAdded: function checkIfAdded(name) {\n      var k = false;\n\n      if (this.favList && this.favList.length > 0) {\n        this.favList.forEach(function (item) {\n          if (item[0] == name) {\n            k = true;\n          }\n        });\n      }\n\n      return k;\n    },\n    jumptoSearch: function jumptoSearch() {\n      sessionStorage.removeItem('params');\n      this.$router.push('/filltheform');\n    },\n    rateThePlace: function rateThePlace() {\n      this.results.forEach(function (result) {\n        var rating = 0;\n        result[1].forEach(function (item) {\n          if (item[0] == \"hospital\") {\n            if (item[1].length < 2) {\n              rating += item[1].length / 2;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"restaurant\") {\n            if (item[1].length < 8) {\n              rating += item[1].length / 8;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"supermarket\") {\n            if (item[1].length < 2) {\n              rating += item[1].length / 2;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"tram stop\") {\n            if (item[1].length < 4) {\n              rating += item[1].length / 4;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"pharmacy\") {\n            if (item[1].length < 2) {\n              rating += item[1].length / 2;\n            } else {\n              rating += 1;\n            }\n          }\n        });\n        result.splice(5, 1, rating);\n      });\n    },\n    initMap: function initMap(element, index1, index2) {\n      this.mapShown = true;\n      var center = {\n        lat: element[6],\n        lng: element[7]\n      };\n      this.mapTitle = element[0];\n      var map = new window.google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 15,\n        center: center,\n        scrollwheel: false,\n        clickableIcons: false\n      }); // The marker, positioned at Uluru\n\n      var marker = new window.google.maps.Marker({\n        position: center,\n        map: map\n      });\n      var infoWindow = new window.google.maps.InfoWindow();\n      marker.addListener(\"click\", function () {\n        infoWindow.close();\n        infoWindow.setContent(element[0]);\n        infoWindow.open(marker.getMap(), marker);\n      });\n\n      if (index1 == 1) {\n        var essential = element[1];\n        this.mapType = \"Essential facilities\";\n        essential.forEach(function (places) {\n          var title = places[0];\n          var location = places[1];\n          location.forEach(function (l1) {\n            var geo = l1.geometry.location;\n            var marker1 = new window.google.maps.Marker({\n              position: geo,\n              map: map,\n              title: \"\".concat(title)\n            });\n            marker1.addListener(\"click\", function () {\n              infoWindow.close();\n              infoWindow.setContent(l1.name);\n              infoWindow.open(marker1.getMap(), marker1);\n            });\n          });\n        });\n      }\n\n      if (index1 == 4) {\n        var _essential = element[4][index2];\n        var title = _essential[0];\n        this.mapType = title;\n\n        _essential[1].forEach(function (l1) {\n          var geo = l1.geometry.location;\n          var marker1 = new window.google.maps.Marker({\n            position: geo,\n            map: map,\n            title: \"\".concat(title)\n          });\n          marker1.addListener(\"click\", function () {\n            infoWindow.close();\n            infoWindow.setContent(l1.name);\n            infoWindow.open(marker1.getMap(), marker1);\n          });\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","props","mounted","data","types","results","favList","fav","mapShown","mapTitle","mapType","methods","searchNearbyLocations","i","lat","lng","j","axios","response","result","catch","console","k","addtoFavorite","element","index","distanceMatrix","id","config","method","url","headers","then","removeFromFavorite","jumpToReview","item","params","checkIfAdded","jumptoSearch","sessionStorage","rateThePlace","rating","initMap","index1","index2","zoom","center","scrollwheel","clickableIcons","position","map","marker","infoWindow","essential","location","title","marker1"],"sourceRoot":"src/views/compare","sources":["mresult.vue"],"sourcesContent":["<template>\n  <div class=\"resultPage\">\n      <div class='opTitle'>Result Showing</div>\n      <div class=\"resultbody\">\n      <div  v-for='(element,index) in results' :key=\"element[0]\">\n        <div class=\"firstLine\">\n        <div class=\"names\"> <i class=\"el-icon-location-information\"/>{{element[0]}}</div>\n        <div class=\"ratings\">\n                <div class=\"favIcon clickable\" @click=\"addtoFavorite(element,index)\" v-if=\"!fav[index]\" ><img src=\"../../assets/addFav.png\" /></div>\n                <div class=\"favIcon clickable\" @click=\"removeFromFavorite(element,index)\" v-if=\"fav[index]\" ><img src=\"../../assets/removeFav.png\" /></div>\n        </div>\n        </div>\n      <div v-if=\"searchLocations2.length>0\" >\n        <div class=\"smallTitle\">Distance and time taken to desired locations</div>\n        <div class='eachResult ' v-for='(des) in element[3]' :key=\"element[0]+des[0]\">\n            <div><i class=\"el-icon-location-information\"/>{{des[0]}}:</div>\n            <div class=\"mainContent\">\n            <div><i class=\"el-icon-guide\" style=\"color:darkblue\"/>Distance:{{des[1]}}</div>\n            <div><i class=\"el-icon-truck\" style=\"color:darkblue\"/>Minimal duration:{{des[2]}}</div>\n            </div>\n        </div>\n     </div>\n     <div v-if=\"LocationTypes.length>0\">\n         <div class=\"smallTitle\">Number of facilities users would like to have</div>\n         <div class='eachResult typesLocations'><div class=\"mainContent1\" v-for='(item, index) in element[4]' :key=\"element[0]+item[0]+element[2]\"><i class=\"el-icon-school\" style=\"color:darkblue\"/>{{item[0]}}:{{item[1].length}}\n         <el-button v-if=\"item[1].length!=0\" @click=\"initMap(element,4,index)\" type=\"text\" icon=\"el-icon-s-shop\">show on map</el-button></div>\n         </div>\n     </div>\n      <div class=\"smallTitle\">Nearby essential facilities <el-button @click=\"initMap(element,1,0)\" type=\"text\" icon=\"el-icon-s-shop\">show on map</el-button></div> \n     <div class='eachResult'>\n         <div class=\"mainContent1\" v-for='(item) in element[1]' :key=\"element[0]+item[0]+element[2]\"><div><i class=\"el-icon-school\" style=\"color:darkblue\"/>{{item[0]}}:{{item[1].length}}</div></div>\n     </div>\n     <div class=\"smallTitle\">Life convenience rating</div>\n     <div class='eachResult finalone'>\n     <el-rate v-model=\"element[5]\" \n                disabled\n                show-score\n                text-color=\"#ff9900\"\n                score-template=\"{value} stars\"></el-rate>\n      \n      <div><i class=\"el-icon-info\"/>This rating was calculated by an algorithm involving the essential facilities only. To see others' review please click the button below.</div>\n     \n     <el-button  @click=\"jumpToReview({urls:require('../../assets/city.jpeg'),title:element[0]})\">Review Page</el-button>\n     </div>\n      \n     </div>\n      </div>\n     <div class=\"showMap\" v-show=\"mapShown\">\n      <div class=\"title\"><div>{{mapType}} near {{mapTitle}}</div><i class=\"el-icon-close\" @click=\"mapShown=false\"></i></div>\n      <div id=\"map\"></div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"\nexport default {\n    name:\"resultPage\",\n    props:[\"searchLocations\",\"searchLocations2\",\"LocationTypes\"],\n    mounted(){\n        //         console.log(this.$route.params.searchLocations)\n        // console.log(this.$route.params.searchLocations2)\n        // console.log(this.$route.params.LocationTypes)\n        // this.searchLocations=this.$route.params.searchLocations\n        // this.searchLocations2=this.$route.params.searchLocations2\n        // this.LocationTypes=this.$route.params.LocationTypes\n         this.favList = this.$store.state.favList\n        // // this.initMap()\n        // if(this.searchLocations){\n        // this.searchNearbyLocations()\n        // sessionStorage.setItem('params', JSON.stringify(this.$route.params));\n        // let data = sessionStorage.getItem('params');\n        //     console.log('adddd',data)\n        // }else{\n        //     let data = JSON.parse(sessionStorage.getItem('params'));\n        //     console.log(data)\n        //     console.log(data.searchLocations)\n        //     this.searchLocations=data.searchLocations\n        //     this.searchLocations2=data.searchLocations2\n        //     this.LocationTypes=data.LocationTypes\n        //     console.log(data.searchLocations2)\n        //     console.log(data.LocationTypes)\n        //     this.searchNearbyLocations()\n        // }\n        this.searchNearbyLocations()\n   \n  },\n  data(){\n    return{\n        types:[\"hospital\",\"restaurant\",\"supermarket\",\"pharmacy\"],\n        results:[],\n        favList:[],\n        fav:[],\n        mapShown:false,\n        mapTitle:\"\",\n        mapType:\"\"\n    }\n  },\n  methods:{\n      searchNearbyLocations(){\n  \n        for(let i =0;i<this.searchLocations.length;i++){\n             if( this.searchLocations[i].viewport.Ta){\n              var lat = this.searchLocations[i].viewport.yb.h\n              var lng= this.searchLocations[i].viewport.Ta.h\n            }\n            else if(this.searchLocations[i].viewport.Ab){\n                lat = this.searchLocations[i].viewport.Ab.h\n                lng= this.searchLocations[i].viewport.Ua.h\n            }else{\n                 lat = this.searchLocations[i].viewport.south\n               lng= this.searchLocations[i].viewport.west\n            }\n              let added=this.checkIfAdded(this.searchLocations[i].shortName)\n              this.fav.push(added)\n              this.results.push([this.searchLocations[i].shortName,[],added,[],[],0,lat,lng])\n              this.distanceMatrix(this.searchLocations[i].id,i)\n              for(let j =0;j<this.types.length;j++){\n              const URL=`api/maps/api/place/nearbysearch/json?location=${lat},${lng}&type=${this.types[j]}&radius=250&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`;\n        \n            axios.get(URL).then(async response=>{\n                  let  result= await response.data.results\n           \n                  this.results[i][1].push([this.types[j],result])\n                  this.rateThePlace()\n                  \n                  \n              })\n              .catch(error=>{\n                  console.log(error.message)\n              })\n              }\n              const URL1=`api/maps/api/place/nearbysearch/json?location=${lat},${lng}&keyword=tram_stop&radius=250&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`;\n        \n              axios.get(URL1).then(async response=>{\n                  let result= await response.data.results\n          \n                  this.results[i][1].push([\"tram stop\",result])\n                  this.rateThePlace()\n                  \n                  \n              })\n              .catch(error=>{\n                  console.log(error.message)\n              })\n\n              if(this.LocationTypes.length>0){\n                for(let k =0;k<this.LocationTypes.length;k++){\n                const URL2=`api/maps/api/place/nearbysearch/json?location=${lat},${lng}&keyword=${this.LocationTypes[k]}&radius=250&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`;\n        \n                 axios.get(URL2).then(async response=>{\n                  let result= await response.data.results\n                  this.results[i][4].push([this.LocationTypes[k],result])\n                  this.rateThePlace()\n                  \n                  \n              })\n              .catch(error=>{\n                  console.log(error.message)\n              })\n             \n              }}\n        \n          }\n          \n          \n\n      },\n      addtoFavorite(element,index){\n          if(this.favList && this.favList.length>0){\n              this.favList.push(element)\n          }else{\n              this.favList = []\n              this.favList.push(element)\n          }\n          this.$store.commit(\"updatefavList\",this.favList)\n          this.fav.splice(index,1,true)\n          this.$message.success('You save the result!')\n        \n      },\n      distanceMatrix(id,index){\n        for(let i =0;i<this.searchLocations2.length;i++){\n            // const lat1 = this.searchLocations2[i].viewport.Ab.h\n            // const lng1= this.searchLocations2[i].viewport.Va.h\n            const id2=this.searchLocations2[i].id\n            var axios = require('axios');\n            var config = {\n            method: 'get',\n            url: `api/maps/api/distancematrix/json?origins=place_id:${id}&destinations=place_id:${id2}&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`,\n            headers: { }\n            };\n\n            axios(config)\n            .then( (response)=> {\n            let k=response.data.rows[0].elements[0];\n            let distance=k.distance.text;\n            let duration=k.duration.text;\n            this.results[index][3].push([this.searchLocations2[i].shortName,distance,duration])\n            })\n            .catch(function (error) {\n            console.log(error);\n            });}\n          \n\n      },\n      removeFromFavorite(element,index){\n    \n          for(let i=0;i<this.favList.length;i++){\n              if(this.favList[i][0]==element[0]){\n                  this.favList.splice(i,1)\n              }\n          }\n        this.$store.commit(\"updatefavList\",this.favList)\n        this.fav.splice(index,1,false)\n        this.$message.error('You remove the result!')\n      \n\n      },\n      jumpToReview(item){\n            this.$router.push(\n                {\n                    name:'mreview',\n                    params:{\"src\":item.urls,\"title\":item.title,\"pre\":1,\"searchLocations\":this.searchLocations,\"searchLocations2\":this.searchLocations2,\"LocationTypes\":this.LocationTypes}\n                }\n            )\n        },\n      checkIfAdded(name){\n          var k=false\n          if(this.favList && this.favList.length>0){\n          this.favList.forEach(item=>{\n              if(item[0]==name){\n                  k=true\n              }\n\n          })\n           }\n          return k\n\n      },\n      jumptoSearch(){\n\n     \n        sessionStorage.removeItem('params');\n        this.$router.push('/filltheform')\n    },\n  \n      rateThePlace(){\n          this.results.forEach(result=>{\n              let rating=0;\n              result[1].forEach(item=>{\n                  if(item[0]==\"hospital\"){\n                      if(item[1].length<2){\n                          rating+=item[1].length/2\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"restaurant\"){\n                      if(item[1].length<8){\n                          rating+=item[1].length/8\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"supermarket\"){\n                      if(item[1].length<2){\n                          rating+=item[1].length/2\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"tram stop\"){\n                      if(item[1].length<4){\n                          rating+=item[1].length/4\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"pharmacy\"){\n                      if(item[1].length<2){\n                          rating+=item[1].length/2\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  \n              })\n              result.splice(5,1,rating)\n          }\n          )\n          \n      },\n       initMap(element,index1,index2) {\n        this.mapShown=true\n      \n        const center = { lat: element[6], lng: element[7] };\n        this.mapTitle=element[0]\n        const map = new window.google.maps.Map(document.getElementById(\"map\"), {\n            zoom: 15,\n            center: center,\n            scrollwheel: false,\n            clickableIcons:false,\n        });\n        // The marker, positioned at Uluru\n        const marker=new window.google.maps.Marker({\n            position: center,\n            map: map,\n        });\n        const infoWindow = new window.google.maps.InfoWindow();\n        marker.addListener(\"click\", () => {\n      infoWindow.close();\n      infoWindow.setContent(element[0]);\n      infoWindow.open(marker.getMap(), marker);\n    });\n    if(index1==1){\n       const essential=element[1]\n       this.mapType=\"Essential facilities\"\n       essential.forEach((places)=>{\n           const title = places[0]\n           const location=places[1]\n           \n           location.forEach((l1)=>{\n               const geo = l1.geometry.location\n               const marker1=new window.google.maps.Marker({\n                position: geo,\n                map: map,\n                title: `${title}`,\n                 });\n                 marker1.addListener(\"click\", () => {\n                infoWindow.close();\n                infoWindow.setContent(l1.name);\n                infoWindow.open(marker1.getMap(), marker1);\n                 });\n        \n\n           })\n\n       })}\n       if(index1==4){\n           const essential=element[4][index2]\n           const title = essential[0]\n           this.mapType=title\n       essential[1].forEach((l1)=>{\n           \n               const geo = l1.geometry.location\n               const marker1=new window.google.maps.Marker({\n                position: geo,\n                map: map,\n                title: `${title}`,\n                 });\n                 marker1.addListener(\"click\", () => {\n                infoWindow.close();\n                infoWindow.setContent(l1.name);\n                infoWindow.open(marker1.getMap(), marker1);\n                 });\n        \n\n\n       })\n\n       }\n       \n        }\n      \n\n  \n  }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n .resultPage {\n\n    z-index:1;\n    margin-bottom:10px;\n    margin:auto;\n    margin-top:1vh;  \n    width:85vw;\n    overflow: scroll;\n    .showMap{\n        position: fixed;\n        background: white;\n        box-shadow: 0 0 2px #7d9cce;\n        z-index: 2;\n        left:5vw;\n        top:18vh;\n        overflow: scroll;\n        width:90vw;\n        .title{\n            display: flex;\n            align-items: center;\n            padding:20px;\n             justify-content: space-between;\n             font:16px;\n             color: #174287;\n        }\n        i{\n            cursor: pointer;\n        }\n     \n    #map{\n        height: 60vh;\n        width:90vw;\n    }}\n    .resultbody{\n        display: flex;\n        justify-content: space-between;\n        flex-wrap: wrap;\n         border-top: 1px  solid #a1c4fd;\n         margin-top:15px;\n\n        & > div{\n            width:85vw;\n            margin-top:20px;\n            box-sizing: border-box;\n            border:1px  solid #a1c4fd;\n            box-shadow: 0 1px 8px rgba(0,0,0,0.2);\n           // text-align: center;\n           \n            .firstLine{\n                display: flex;\n                justify-content: space-between;\n                background-image: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);\n                 border-bottom:1px  solid #a1c4fd;\n                padding: 15px;\n                .names{\n                width:auto;\n                font-size: 18px;\n                // text-decoration-line: underline;\n                //text-decoration-color:#effaff;\n                cursor:pointer;\n                //border-bottom:2px  solid #7d9cce;\n                 display: flex;\n                align-items: center;\n                color:rgb(12, 44, 96);\n                font-weight: 14px;\n                i{\n                    color:red;\n                    margin-right:2px;\n                }\n               // margin-bottom:15px;\n    \n                 //text-decoration-thickness: 2px;\n                }\n                .ratings{\n                     display: flex;\n                     justify-content: space-between;\n                     align-items: center;\n                     .favIcon, img{\n                         width:16px;\n                         height: 16px;\n                     }\n                     .favIcon{\n                         margin-left:10px;\n                     }\n\n                }\n            }\n\n            .smallTitle{\n                padding:15px 0;\n                margin:0 15px;\n                border-bottom:2px  dashed #7d9cce;\n                clear:both;\n            }\n            .eachResult{\n                 padding:15px;\n                 i{\n                    color:red;\n                    margin-right:2px;\n                }\n                 .mainContent{\n                     padding:20px;\n                     display:flex;\n                    justify-content: space-between;\n                    flex-wrap: wrap;\n\n\n                 }\n                 &.finalone{\n                    i{\n                    color:orange;\n                    margin-right:2px;\n                    \n                }\n                font-size:12px;\n                .el-rate{\n                     text-align: center;\n                 }\n                  .el-button{\n                     margin-top:10px;\n                     font-size: 12px;\n                     width:90px;\n                     height:30px;\n                     padding: 0;\n                     background:#effaff;\n                     margin-left:calc(50% - 45px);\n                 }\n\n                }\n                 .mainContent1{\n                     padding:20px;\n                     float: left;\n                    div{\n                        width: auto;}\n\n\n                 }\n            }\n            \n        }\n\n    }\n    .clickable{\n        cursor: pointer;\n    }\n    .mg-bt-10{\n        margin-bottom: 10px;\n    }\n\n    .opTitle{\n        border-left: 4px  solid #a1c4fd;\n        color:rgb(12, 44, 96);\n        font-weight: bold;\n        padding-left:10px;\n        display: flex;\n        align-items: center;\n    }\n        \n    \n    .tagsLoc .el-tag{\n        margin-top:10px;\n        float:left;\n        margin-right:20px;\n    }\n   \n    .SearchBox{\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        margin-bottom:10px;\n         //border-bottom:1px solid #a1c4fd;\n        .el-input{\n            width:calc(100% - 160px);\n            margin:20px 0;\n             height: 32px;\n        }\n   \n        .el-button{\n            height: 32px;\n             width:60px;\n             margin:0;\n            background: #effaff;\n            font-size:11px;\n            padding: 10px; \n          \n\n        }\n    }\n  }\n</style>"]},"metadata":{},"sourceType":"module"}