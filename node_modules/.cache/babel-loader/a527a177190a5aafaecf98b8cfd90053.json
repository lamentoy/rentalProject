{"ast":null,"code":"import _slicedToArray from \"/Users/lamentoyy/Desktop/rental_project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, reactive, defineComponent } from \"vue\";\nimport { isDef, createNamespace, makeNumericProp } from \"../utils\";\nimport { raf, useRect, doubleRaf, useEventListener, onMountedOrActivated } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose\";\nimport { onPopupReopen } from \"../composables/on-popup-reopen\";\nimport { Icon } from \"../icon\";\n\nvar _createNamespace = createNamespace(\"notice-bar\"),\n    _createNamespace2 = _slicedToArray(_createNamespace, 2),\n    name = _createNamespace2[0],\n    bem = _createNamespace2[1];\n\nvar noticeBarProps = {\n  text: String,\n  mode: String,\n  color: String,\n  delay: makeNumericProp(1),\n  speed: makeNumericProp(60),\n  leftIcon: String,\n  wrapable: Boolean,\n  background: String,\n  scrollable: {\n    type: Boolean,\n    default: null\n  }\n};\nvar stdin_default = defineComponent({\n  name: name,\n  props: noticeBarProps,\n  emits: [\"close\", \"replay\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots;\n    var wrapWidth = 0;\n    var contentWidth = 0;\n    var startTimer;\n    var wrapRef = ref();\n    var contentRef = ref();\n    var state = reactive({\n      show: true,\n      offset: 0,\n      duration: 0\n    });\n\n    var renderLeftIcon = function renderLeftIcon() {\n      if (slots[\"left-icon\"]) {\n        return slots[\"left-icon\"]();\n      }\n\n      if (props.leftIcon) {\n        return _createVNode(Icon, {\n          \"class\": bem(\"left-icon\"),\n          \"name\": props.leftIcon\n        }, null);\n      }\n    };\n\n    var getRightIconName = function getRightIconName() {\n      if (props.mode === \"closeable\") {\n        return \"cross\";\n      }\n\n      if (props.mode === \"link\") {\n        return \"arrow\";\n      }\n    };\n\n    var onClickRightIcon = function onClickRightIcon(event) {\n      if (props.mode === \"closeable\") {\n        state.show = false;\n        emit(\"close\", event);\n      }\n    };\n\n    var renderRightIcon = function renderRightIcon() {\n      if (slots[\"right-icon\"]) {\n        return slots[\"right-icon\"]();\n      }\n\n      var name2 = getRightIconName();\n\n      if (name2) {\n        return _createVNode(Icon, {\n          \"name\": name2,\n          \"class\": bem(\"right-icon\"),\n          \"onClick\": onClickRightIcon\n        }, null);\n      }\n    };\n\n    var onTransitionEnd = function onTransitionEnd() {\n      state.offset = wrapWidth;\n      state.duration = 0;\n      raf(function () {\n        doubleRaf(function () {\n          state.offset = -contentWidth;\n          state.duration = (contentWidth + wrapWidth) / +props.speed;\n          emit(\"replay\");\n        });\n      });\n    };\n\n    var renderMarquee = function renderMarquee() {\n      var ellipsis = props.scrollable === false && !props.wrapable;\n      var style = {\n        transform: state.offset ? \"translateX(\".concat(state.offset, \"px)\") : \"\",\n        transitionDuration: \"\".concat(state.duration, \"s\")\n      };\n      return _createVNode(\"div\", {\n        \"ref\": wrapRef,\n        \"role\": \"marquee\",\n        \"class\": bem(\"wrap\")\n      }, [_createVNode(\"div\", {\n        \"ref\": contentRef,\n        \"style\": style,\n        \"class\": [bem(\"content\"), {\n          \"van-ellipsis\": ellipsis\n        }],\n        \"onTransitionend\": onTransitionEnd\n      }, [slots.default ? slots.default() : props.text])]);\n    };\n\n    var reset = function reset() {\n      var delay = props.delay,\n          speed = props.speed,\n          scrollable = props.scrollable;\n      var ms = isDef(delay) ? +delay * 1e3 : 0;\n      wrapWidth = 0;\n      contentWidth = 0;\n      state.offset = 0;\n      state.duration = 0;\n      clearTimeout(startTimer);\n      startTimer = setTimeout(function () {\n        if (!wrapRef.value || !contentRef.value || scrollable === false) {\n          return;\n        }\n\n        var wrapRefWidth = useRect(wrapRef).width;\n        var contentRefWidth = useRect(contentRef).width;\n\n        if (scrollable || contentRefWidth > wrapRefWidth) {\n          doubleRaf(function () {\n            wrapWidth = wrapRefWidth;\n            contentWidth = contentRefWidth;\n            state.offset = -contentWidth;\n            state.duration = contentWidth / +speed;\n          });\n        }\n      }, ms);\n    };\n\n    onPopupReopen(reset);\n    onMountedOrActivated(reset);\n    useEventListener(\"pageshow\", reset);\n    useExpose({\n      reset: reset\n    });\n    watch(function () {\n      return [props.text, props.scrollable];\n    }, reset);\n    return function () {\n      var color = props.color,\n          wrapable = props.wrapable,\n          background = props.background;\n      return _withDirectives(_createVNode(\"div\", {\n        \"role\": \"alert\",\n        \"class\": bem({\n          wrapable: wrapable\n        }),\n        \"style\": {\n          color: color,\n          background: background\n        }\n      }, [renderLeftIcon(), renderMarquee(), renderRightIcon()]), [[_vShow, state.show]]);\n    };\n  }\n});\nexport { stdin_default as default };","map":{"version":3,"names":["withDirectives","_withDirectives","vShow","_vShow","createVNode","_createVNode","ref","watch","reactive","defineComponent","isDef","createNamespace","makeNumericProp","raf","useRect","doubleRaf","useEventListener","onMountedOrActivated","useExpose","onPopupReopen","Icon","name","bem","noticeBarProps","text","String","mode","color","delay","speed","leftIcon","wrapable","Boolean","background","scrollable","type","default","stdin_default","props","emits","setup","emit","slots","wrapWidth","contentWidth","startTimer","wrapRef","contentRef","state","show","offset","duration","renderLeftIcon","getRightIconName","onClickRightIcon","event","renderRightIcon","name2","onTransitionEnd","renderMarquee","ellipsis","style","transform","transitionDuration","reset","ms","clearTimeout","setTimeout","value","wrapRefWidth","width","contentRefWidth"],"sources":["/Users/lamentoyy/Desktop/rental_project/node_modules/vant/es/notice-bar/NoticeBar.js"],"sourcesContent":["import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, reactive, defineComponent } from \"vue\";\nimport { isDef, createNamespace, makeNumericProp } from \"../utils\";\nimport { raf, useRect, doubleRaf, useEventListener, onMountedOrActivated } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose\";\nimport { onPopupReopen } from \"../composables/on-popup-reopen\";\nimport { Icon } from \"../icon\";\nconst [name, bem] = createNamespace(\"notice-bar\");\nconst noticeBarProps = {\n  text: String,\n  mode: String,\n  color: String,\n  delay: makeNumericProp(1),\n  speed: makeNumericProp(60),\n  leftIcon: String,\n  wrapable: Boolean,\n  background: String,\n  scrollable: {\n    type: Boolean,\n    default: null\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: noticeBarProps,\n  emits: [\"close\", \"replay\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let wrapWidth = 0;\n    let contentWidth = 0;\n    let startTimer;\n    const wrapRef = ref();\n    const contentRef = ref();\n    const state = reactive({\n      show: true,\n      offset: 0,\n      duration: 0\n    });\n    const renderLeftIcon = () => {\n      if (slots[\"left-icon\"]) {\n        return slots[\"left-icon\"]();\n      }\n      if (props.leftIcon) {\n        return _createVNode(Icon, {\n          \"class\": bem(\"left-icon\"),\n          \"name\": props.leftIcon\n        }, null);\n      }\n    };\n    const getRightIconName = () => {\n      if (props.mode === \"closeable\") {\n        return \"cross\";\n      }\n      if (props.mode === \"link\") {\n        return \"arrow\";\n      }\n    };\n    const onClickRightIcon = (event) => {\n      if (props.mode === \"closeable\") {\n        state.show = false;\n        emit(\"close\", event);\n      }\n    };\n    const renderRightIcon = () => {\n      if (slots[\"right-icon\"]) {\n        return slots[\"right-icon\"]();\n      }\n      const name2 = getRightIconName();\n      if (name2) {\n        return _createVNode(Icon, {\n          \"name\": name2,\n          \"class\": bem(\"right-icon\"),\n          \"onClick\": onClickRightIcon\n        }, null);\n      }\n    };\n    const onTransitionEnd = () => {\n      state.offset = wrapWidth;\n      state.duration = 0;\n      raf(() => {\n        doubleRaf(() => {\n          state.offset = -contentWidth;\n          state.duration = (contentWidth + wrapWidth) / +props.speed;\n          emit(\"replay\");\n        });\n      });\n    };\n    const renderMarquee = () => {\n      const ellipsis = props.scrollable === false && !props.wrapable;\n      const style = {\n        transform: state.offset ? `translateX(${state.offset}px)` : \"\",\n        transitionDuration: `${state.duration}s`\n      };\n      return _createVNode(\"div\", {\n        \"ref\": wrapRef,\n        \"role\": \"marquee\",\n        \"class\": bem(\"wrap\")\n      }, [_createVNode(\"div\", {\n        \"ref\": contentRef,\n        \"style\": style,\n        \"class\": [bem(\"content\"), {\n          \"van-ellipsis\": ellipsis\n        }],\n        \"onTransitionend\": onTransitionEnd\n      }, [slots.default ? slots.default() : props.text])]);\n    };\n    const reset = () => {\n      const {\n        delay,\n        speed,\n        scrollable\n      } = props;\n      const ms = isDef(delay) ? +delay * 1e3 : 0;\n      wrapWidth = 0;\n      contentWidth = 0;\n      state.offset = 0;\n      state.duration = 0;\n      clearTimeout(startTimer);\n      startTimer = setTimeout(() => {\n        if (!wrapRef.value || !contentRef.value || scrollable === false) {\n          return;\n        }\n        const wrapRefWidth = useRect(wrapRef).width;\n        const contentRefWidth = useRect(contentRef).width;\n        if (scrollable || contentRefWidth > wrapRefWidth) {\n          doubleRaf(() => {\n            wrapWidth = wrapRefWidth;\n            contentWidth = contentRefWidth;\n            state.offset = -contentWidth;\n            state.duration = contentWidth / +speed;\n          });\n        }\n      }, ms);\n    };\n    onPopupReopen(reset);\n    onMountedOrActivated(reset);\n    useEventListener(\"pageshow\", reset);\n    useExpose({\n      reset\n    });\n    watch(() => [props.text, props.scrollable], reset);\n    return () => {\n      const {\n        color,\n        wrapable,\n        background\n      } = props;\n      return _withDirectives(_createVNode(\"div\", {\n        \"role\": \"alert\",\n        \"class\": bem({\n          wrapable\n        }),\n        \"style\": {\n          color,\n          background\n        }\n      }, [renderLeftIcon(), renderMarquee(), renderRightIcon()]), [[_vShow, state.show]]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}