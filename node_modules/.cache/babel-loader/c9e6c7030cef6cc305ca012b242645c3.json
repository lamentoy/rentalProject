{"ast":null,"code":"import _asyncToGenerator from \"/Users/lamentoyy/Desktop/rental_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"secondPage\",\n  mounted: function mounted() {\n    console.log(this.$route.params.searchLocations);\n    console.log(this.$route.params.searchLocations2);\n    console.log(this.$route.params.LocationTypes);\n    this.searchLocations = this.$route.params.searchLocations;\n    this.searchLocations2 = this.$route.params.searchLocations2;\n    this.LocationTypes = this.$route.params.LocationTypes;\n    this.favList = this.$store.state.favList;\n    console.log('1111111', this.favList);\n    this.searchNearbyLocations();\n  },\n  data: function data() {\n    return {\n      searchLocations: [],\n      searchLocations2: [],\n      LocationTypes: [],\n      types: [\"hospital\", \"restaurant\", \"supermarket\", \"pharmacy\"],\n      results: [],\n      favList: [],\n      fav: []\n    };\n  },\n  methods: {\n    searchNearbyLocations: function searchNearbyLocations() {\n      var _this = this;\n\n      var _loop = function _loop(i) {\n        var lat = _this.searchLocations[i].viewport.Ab.h;\n        var lng = _this.searchLocations[i].viewport.Va.h;\n        console.log(lat);\n        console.log(lng);\n\n        var added = _this.checkIfAdded(_this.searchLocations[i].shortName);\n\n        _this.fav.push(added);\n\n        _this.results.push([_this.searchLocations[i].shortName, [], added, []]);\n\n        _this.distanceMatrix(_this.searchLocations[i].id, i);\n\n        var _loop2 = function _loop2(j) {\n          var URL = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=\".concat(lat, \",\").concat(lng, \"&type=\").concat(_this.types[j], \"&radius=500&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\");\n          axios.get(URL).then( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(response) {\n              var result;\n              return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _context3.next = 2;\n                      return response.data.results;\n\n                    case 2:\n                      result = _context3.sent;\n                      console.log(result);\n\n                      _this.results[i][1].push([_this.types[j], result]);\n\n                      _this.rateThePlace();\n\n                    case 6:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, _callee3);\n            }));\n\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }()).catch(function (error) {\n            console.log(error.message);\n          });\n        };\n\n        for (var j = 0; j < _this.types.length; j++) {\n          _loop2(j);\n        }\n\n        var URL1 = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=\".concat(lat, \",\").concat(lng, \"&keyword=tram_stop&radius=500&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\");\n        axios.get(URL1).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(response) {\n            var result;\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return response.data.results;\n\n                  case 2:\n                    result = _context.sent;\n                    console.log(result);\n\n                    _this.results[i][1].push([\"tram stop\", result]);\n\n                    _this.rateThePlace();\n\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()).catch(function (error) {\n          console.log(error.message);\n        });\n\n        if (_this.LocationTypes.length > 0) {\n          var _loop3 = function _loop3(k) {\n            var URL2 = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=\".concat(lat, \",\").concat(lng, \"&keyword=\").concat(_this.LocationTypes[k], \"&radius=500&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\");\n            axios.get(URL2).then( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(response) {\n                var result;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return response.data.results;\n\n                      case 2:\n                        result = _context2.sent;\n                        console.log(result);\n\n                        _this.results[i][1].push([_this.LocationTypes[k], result]);\n\n                        _this.rateThePlace();\n\n                      case 6:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()).catch(function (error) {\n              console.log(error.message);\n            });\n          };\n\n          for (var k = 0; k < _this.LocationTypes.length; k++) {\n            _loop3(k);\n          }\n        }\n\n        console.log(_this.results);\n      };\n\n      for (var i = 0; i < this.searchLocations.length; i++) {\n        _loop(i);\n      }\n    },\n    addtoFavorite: function addtoFavorite(element, index) {\n      if (this.favList && this.favList.length > 0) {\n        this.favList.push(element);\n      } else {\n        this.favList = [];\n        this.favList.push(element);\n      }\n\n      this.$store.commit(\"updatefavList\", this.favList);\n      this.fav.splice(index, 1, true);\n      console.log(element);\n      console.log(this.favList);\n      console.log(this.results);\n    },\n    distanceMatrix: function distanceMatrix(id, index) {\n      var _this2 = this;\n\n      var _loop4 = function _loop4(i) {\n        // const lat1 = this.searchLocations2[i].viewport.Ab.h\n        // const lng1= this.searchLocations2[i].viewport.Va.h\n        var id2 = _this2.searchLocations2[i].id;\n        console.log('222222', id, id2);\n        axios = require('axios');\n        config = {\n          method: 'get',\n          url: \"https://maps.googleapis.com/maps/api/distancematrix/json?origins=place_id:\".concat(id, \"&destinations=place_id:\").concat(id2, \"&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE\"),\n          headers: {}\n        };\n        axios(config).then(function (response) {\n          var k = response.data.rows[0].elements[0];\n          var distance = k.distance.text;\n          var duration = k.duration.text;\n\n          _this2.results[index][3].push([_this2.searchLocations2[i].shortName, distance, duration]);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n\n      for (var i = 0; i < this.searchLocations2.length; i++) {\n        var axios;\n        var config;\n\n        _loop4(i);\n      }\n    },\n    removeFromFavorite: function removeFromFavorite(element, index) {\n      console.log(element);\n\n      for (var i = 0; i < this.favList.length; i++) {\n        if (this.favList[i][0] == element[0]) {\n          this.favList.splice(i, 1);\n        }\n      }\n\n      this.$store.commit(\"updatefavList\", this.favList);\n      this.fav.splice(index, 1, false);\n      console.log(element);\n      console.log(this.favList);\n      console.log(this.results);\n    },\n    checkIfAdded: function checkIfAdded(name) {\n      var _this3 = this;\n\n      var k = false;\n      console.log(this.favList);\n      console.log(name);\n\n      if (this.favList && this.favList.length > 0) {\n        this.favList.forEach(function (item) {\n          if (item[0] == name) {\n            k = true;\n          }\n\n          console.log(_this3.favList);\n        });\n      }\n\n      return k;\n    },\n    jumptoSearch: function jumptoSearch() {\n      this.$router.push('/filltheform');\n    },\n    rateThePlace: function rateThePlace() {\n      this.results.forEach(function (result) {\n        var rating = 0;\n        result[1].forEach(function (item) {\n          if (item[0] == \"hospital\") {\n            if (item[1].length < 2) {\n              rating += item[1].length / 2;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"restaurant\") {\n            if (item[1].length < 8) {\n              rating += item[1].length / 8;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"supermarket\") {\n            if (item[1].length < 2) {\n              rating += item[1].length / 2;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"tram stop\") {\n            if (item[1].length < 4) {\n              rating += item[1].length / 4;\n            } else {\n              rating += 1;\n            }\n          }\n\n          if (item[0] == \"pharmacy\") {\n            if (item[1].length < 2) {\n              rating += item[1].length / 2;\n            } else {\n              rating += 1;\n            }\n          }\n        });\n        result.splice(4, 1, rating);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;EACAA,kBADA;EAEAC,OAFA,qBAEA;IACAC;IACAA;IACAA;IACA;IACA;IACA;IACA;IACAA;IACA;EAEA,CAbA;EAcAC,IAdA,kBAcA;IACA;MACAC,mBADA;MAEAC,oBAFA;MAGAC,iBAHA;MAIAC,4DAJA;MAKAC,WALA;MAMAC,WANA;MAOAC;IAPA;EAUA,CAzBA;EA0BAC;IACAC,qBADA,mCACA;MAAA;;MAAA,2BACAC,CADA;QAEA;QACA;QACAX;QACAA;;QACA;;QACA;;QACA;;QACA;;QATA,6BAUAY,CAVA;UAWA;UAEAC;YAAA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA;sBAAA,OACAC,qBADA;;oBAAA;sBACAC,MADA;sBAEAf;;sBACA;;sBACA;;oBAJA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA;;YAAA;cAAA;YAAA;UAAA,KAQAgB,KARA,CAQA;YACAhB;UACA,CAVA;QAbA;;QAUA;UAAA;QAcA;;QACA;QAEAa;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA;oBAAA,OACAC,qBADA;;kBAAA;oBACAC,MADA;oBAEAf;;oBACA;;oBACA;;kBAJA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA;;UAAA;YAAA;UAAA;QAAA,KAQAgB,KARA,CAQA;UACAhB;QACA,CAVA;;QAYA;UAAA,6BACAiB,CADA;YAEA;YAEAJ;cAAA;gBAAA;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA;wBAAA,OACAC,qBADA;;sBAAA;wBACAC,MADA;wBAEAf;;wBACA;;wBACA;;sBAJA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA;cAAA;;cAAA;gBAAA;cAAA;YAAA,KAQAgB,KARA,CAQA;cACAhB;YACA,CAVA;UAJA;;UACA;YAAA;UAeA;QAAA;;QACAA;MAxDA;;MACA;QAAA;MAwDA;IAIA,CA9DA;IA+DAkB,aA/DA,yBA+DAC,OA/DA,EA+DAC,KA/DA,EA+DA;MACA;QACA;MACA,CAFA,MAEA;QACA;QACA;MACA;;MACA;MACA;MACApB;MACAA;MACAA;IAEA,CA5EA;IA6EAqB,cA7EA,0BA6EAC,EA7EA,EA6EAF,KA7EA,EA6EA;MAAA;;MAAA,6BACAT,CADA;QAEA;QACA;QACA;QACAX;QACAa,wBANA;QAOAU;UACAC,aADA;UAEAC,mLAFA;UAGAC;QAHA,CAPA;QAaAb,cACAc,IADA,CACA;UACA;UACA;UACA;;UACA;QACA,CANA,EAOAX,KAPA,CAOA;UACAhB;QACA,CATA;MAbA;;MACA;QAAA,IAKAa,KALA;QAAA,IAMAU,MANA;;QAAA;MAqBA;IAGA,CAtGA;IAuGAK,kBAvGA,8BAuGAT,OAvGA,EAuGAC,KAvGA,EAuGA;MACApB;;MACA;QACA;UACA;QACA;MACA;;MACA;MACA;MACAA;MACAA;MACAA;IAEA,CApHA;IAqHA6B,YArHA,wBAqHA/B,IArHA,EAqHA;MAAA;;MACA;MACAE;MACAA;;MACA;QACA;UACA;YACAiB;UACA;;UACAjB;QAEA,CANA;MAOA;;MACA;IAEA,CApIA;IAqIA8B,YArIA,0BAqIA;MAGA;IACA,CAzIA;IA2IAC,YA3IA,0BA2IA;MACA;QACA;QACAhB;UACA;YACA;cACAiB;YACA,CAFA,MAEA;cACAA;YACA;UAEA;;UACA;YACA;cACAA;YACA,CAFA,MAEA;cACAA;YACA;UAEA;;UACA;YACA;cACAA;YACA,CAFA,MAEA;cACAA;YACA;UAEA;;UACA;YACA;cACAA;YACA,CAFA,MAEA;cACAA;YACA;UAEA;;UACA;YACA;cACAA;YACA,CAFA,MAEA;cACAA;YACA;UAEA;QAEA,CA1CA;QA2CAjB;MAGA,CAhDA;IAmDA;EA/LA;AA1BA","names":["name","mounted","console","data","searchLocations","searchLocations2","LocationTypes","types","results","favList","fav","methods","searchNearbyLocations","i","j","axios","response","result","catch","k","addtoFavorite","element","index","distanceMatrix","id","config","method","url","headers","then","removeFromFavorite","checkIfAdded","jumptoSearch","rateThePlace","rating"],"sourceRoot":"src/views","sources":["secondPage.vue"],"sourcesContent":["<template>\n  <div class=\"second_Page\">\n     <div class='result'>Result showing</div>\n    \n      <div  v-for='(element,index) in results' :key=\"element[0]\"><div class=\"names\">{{element[0]}}</div>\n          <el-rate v-model=\"element[4]\" \n            disabled\n            show-score\n            text-color=\"#ff9900\"\n            score-template=\"{value} points\"></el-rate>\n      <div class='eachResult'>\n     <div v-for='des in element[3]' :key=\"element[0]+des[0]\">\n         {{des[0]}}:\n         <div>distance:{{des[1]}}</div>\n         <div>duration:{{des[2]}}</div>\n     </div>\n     <div v-for='(item) in element[1]' :key=\"element[0]+item[0]+element[2]\">{{item[0]}}:{{item[1].length}}</div>\n     <el-button @click=\"addtoFavorite(element,index)\" v-if=\"!fav[index]\">+</el-button>\n     <el-button @click=\"removeFromFavorite(element,index)\" icon=\"el-icon-check\" v-if=\"fav[index]\"></el-button>\n      </div>\n     </div>\n     <div class=\"search\"><el-button @click=\"jumptoSearch\">Search Again</el-button></div>\n     \n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"\nexport default {\n    name:\"secondPage\",\n    mounted(){\n        console.log(this.$route.params.searchLocations)\n        console.log(this.$route.params.searchLocations2)\n        console.log(this.$route.params.LocationTypes)\n        this.searchLocations=this.$route.params.searchLocations\n        this.searchLocations2=this.$route.params.searchLocations2\n        this.LocationTypes=this.$route.params.LocationTypes\n        this.favList = this.$store.state.favList\n        console.log('1111111',this.favList)\n        this.searchNearbyLocations()\n   \n  },\n  data(){\n    return{\n        searchLocations:[],\n        searchLocations2:[],\n        LocationTypes:[],\n        types:[\"hospital\",\"restaurant\",\"supermarket\",\"pharmacy\"],\n        results:[],\n        favList:[],\n        fav:[]\n      \n    }\n  },\n  methods:{\n      searchNearbyLocations(){\n        for(let i =0;i<this.searchLocations.length;i++){\n              const lat = this.searchLocations[i].viewport.Ab.h\n              const lng= this.searchLocations[i].viewport.Va.h\n              console.log(lat)\n              console.log(lng)\n              let added=this.checkIfAdded(this.searchLocations[i].shortName)\n              this.fav.push(added)\n              this.results.push([this.searchLocations[i].shortName,[],added,[]])\n              this.distanceMatrix(this.searchLocations[i].id,i)\n              for(let j =0;j<this.types.length;j++){\n              const URL=`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${lat},${lng}&type=${this.types[j]}&radius=500&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`;\n        \n            axios.get(URL).then(async response=>{\n                  let  result= await response.data.results\n                  console.log(result);\n                  this.results[i][1].push([this.types[j],result])\n                  this.rateThePlace()\n                  \n                  \n              })\n              .catch(error=>{\n                  console.log(error.message)\n              })\n              }\n              const URL1=`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${lat},${lng}&keyword=tram_stop&radius=500&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`;\n        \n              axios.get(URL1).then(async response=>{\n                  let result= await response.data.results\n                  console.log(result);\n                  this.results[i][1].push([\"tram stop\",result])\n                  this.rateThePlace()\n                  \n                  \n              })\n              .catch(error=>{\n                  console.log(error.message)\n              })\n\n              if(this.LocationTypes.length>0){\n                for(let k =0;k<this.LocationTypes.length;k++){\n                const URL2=`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${lat},${lng}&keyword=${this.LocationTypes[k]}&radius=500&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`;\n        \n                 axios.get(URL2).then(async response=>{\n                  let result= await response.data.results\n                  console.log(result);\n                  this.results[i][1].push([this.LocationTypes[k],result])\n                  this.rateThePlace()\n                  \n                  \n              })\n              .catch(error=>{\n                  console.log(error.message)\n              })\n             \n              }}\n              console.log(this.results)\n          }\n          \n          \n\n      },\n      addtoFavorite(element,index){\n          if(this.favList && this.favList.length>0){\n              this.favList.push(element)\n          }else{\n              this.favList = []\n              this.favList.push(element)\n          }\n          this.$store.commit(\"updatefavList\",this.favList)\n          this.fav.splice(index,1,true)\n        console.log(element)\n        console.log(this.favList)\n        console.log(this.results)\n        \n      },\n      distanceMatrix(id,index){\n        for(let i =0;i<this.searchLocations2.length;i++){\n            // const lat1 = this.searchLocations2[i].viewport.Ab.h\n            // const lng1= this.searchLocations2[i].viewport.Va.h\n            const id2=this.searchLocations2[i].id\n            console.log('222222',id,id2)\n            var axios = require('axios');\n            var config = {\n            method: 'get',\n            url: `https://maps.googleapis.com/maps/api/distancematrix/json?origins=place_id:${id}&destinations=place_id:${id2}&key=AIzaSyDYmXO6pRRuMXAAMe2dlaWaynac17ZZMUE`,\n            headers: { }\n            };\n\n            axios(config)\n            .then( (response)=> {\n            let k=response.data.rows[0].elements[0];\n            let distance=k.distance.text;\n            let duration=k.duration.text;\n            this.results[index][3].push([this.searchLocations2[i].shortName,distance,duration])\n            })\n            .catch(function (error) {\n            console.log(error);\n            });}\n          \n\n      },\n      removeFromFavorite(element,index){\n          console.log(element)\n          for(let i=0;i<this.favList.length;i++){\n              if(this.favList[i][0]==element[0]){\n                  this.favList.splice(i,1)\n              }\n          }\n        this.$store.commit(\"updatefavList\",this.favList)\n        this.fav.splice(index,1,false)\n        console.log(element)\n        console.log(this.favList)\n        console.log(this.results)\n\n      },\n      checkIfAdded(name){\n          var k=false\n          console.log(this.favList)\n          console.log(name)\n          if(this.favList && this.favList.length>0){\n          this.favList.forEach(item=>{\n              if(item[0]==name){\n                  k=true\n              }\n        console.log(this.favList)\n\n          })\n           }\n          return k\n\n      },\n      jumptoSearch(){\n     \n     \n      this.$router.push('/filltheform')\n    },\n  \n      rateThePlace(){\n          this.results.forEach(result=>{\n              let rating=0;\n              result[1].forEach(item=>{\n                  if(item[0]==\"hospital\"){\n                      if(item[1].length<2){\n                          rating+=item[1].length/2\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"restaurant\"){\n                      if(item[1].length<8){\n                          rating+=item[1].length/8\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"supermarket\"){\n                      if(item[1].length<2){\n                          rating+=item[1].length/2\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"tram stop\"){\n                      if(item[1].length<4){\n                          rating+=item[1].length/4\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  if(item[0]==\"pharmacy\"){\n                      if(item[1].length<2){\n                          rating+=item[1].length/2\n                      }else{\n                          rating+=1\n                      }\n\n                  }\n                  \n              })\n              result.splice(4,1,rating)\n              \n\n          }\n          )\n          \n      }\n\n  \n  }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n .second_Page {\n\n    padding:0 20px;\n    width:calc(100% - 40px);\n    margin:auto;\n    height:80%;\n    position: fixed;\n    overflow: scroll;\n    .eachResult{\n        border: 1px solid orange;\n        padding: 20px;\n        margin-bottom:20px;\n    }\n    .el-icon-info{\n        size:8px;\n        color:orange;\n    }\n    .clickable{\n        cursor: pointer;\n    }\n    .mg-bt-10{\n        margin-bottom: 10px;\n    }\n    .operations{\n        display: flex;\n        justify-content: space-between;\n    }\n    .el-input{\n        width:100%;\n        margin:20px 0;\n    }\n    .search {\n         margin: auto;\n         margin-top:20px;\n         width:200px;\n      .el-button{\n       border: 1px solid orange;\n        width:200px;\n        color:orange;\n    }}\n    .result{\n       margin: 20px 0;\n       border:1px solid orange;\n       \n       color:orange;\n       font-weight: bold;\n       padding:10px;\n    \n    }\n    .names{\n        background-color: orange;\n        text-align: center;\n        color:white;\n        width:100%;\n        box-sizing: border-box;\n        padding: 10px;\n    }\n  }\n</style>"]},"metadata":{},"sourceType":"module"}